apply plugin: 'java'
apply plugin: 'antlr'

repositories {
  mavenCentral()
}

dependencies {
  antlr 'org.antlr:antlr4:4.11.1'
  testImplementation 'org.junit.jupiter:junit-jupiter-api:5.9.1'
  testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.9.1'
}

generateGrammarSource {
  arguments += ['-no-visitor', '-no-listener']
  outputDirectory = new File(buildDir.toString() + "/generated-src/antlr/main/TP2/")
}

test {
  useJUnitPlatform()
}

jar {
  manifest {
    attributes (
      'Main-Class': 'TP2.Main',
      'Class-Path': configurations.compile.collect{it.toURI().toString()}.join(' ')
    )
  }
}
